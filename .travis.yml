language: php



services:
  - mysql
  - elasticsearch

sudo: true

matrix:
  fast_finish: true
  include:
    - php: 7.2

before_install:
  - sudo mysql -e "use mysql; update user set authentication_string=PASSWORD('root') where User='root'; update user set plugin='mysql_native_password';FLUSH PRIVILEGES;"

install:
  - composer install --prefer-dist

script:
  - composer run-script phpcs; fi
  - composer run-script phpstan
  - vendor/bin/phpunit $PHPUNIT_FLAGS
  - vendor/bin/phpunit -c phpunit-integration.xml --group sync $PHPUNIT_FLAGS
