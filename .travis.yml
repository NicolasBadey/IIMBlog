dist: xenial

language: php

addons:
  chrome: stable

services:
  - mysql
  - elasticsearch

sudo: true

matrix:
  fast_finish: true
  include:
    - php: 7.2

install:
  - printf "\n" | pecl install libsodium
  - composer install --prefer-dist


before_script:
  #wait elasticsearch up
  - sleep 10

before_install:
  - sudo add-apt-repository ppa:ondrej/php -y
  - sudo apt-get -qq update
  - sudo apt-get install -y libsodium-dev

script:
  - vendor/bin/phpstan.phar analyse src --level=1
  - vendor/bin/phpunit -c phpunit-ci.xml
